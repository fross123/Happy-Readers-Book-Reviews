{% extends "layout.html" %}

{% block title %}
    Book Details and Reviews
{% endblock %}

{% block body %}
    <h1 class="text-center text-primary">Book Details</h1>
	<h2 class="text-center">{{ book.title }} by {{ book.author }}</h2>
	<h3 class="text-center">Year: {{ book.year }}</h3>
	<h4 class="text-center">ISBN is {{ book.isbn }}

	<hr>
		
	<h2 class="text-center">Reviews</h2>
		<table class="table table-striped">
		<thead>
		  <tr>
			<th scope="col">Name</th>
			<th scope="col">Review</th>
			<th scope="col">Stars</th>
		  </tr>
		</thead>
		<tbody>
		{% for review in review%}
		  <tr>
			  <th scope="row">{{ review.first_name }}</th>
			<td>{{ review.reviews }}</td>
			<td>{{ review.stars }}</td>
		  </tr>
		{% else %}
			<tr>
			  <th scope="row">No Reviews Yet, be the first!</th>
			</tr>
		{% endfor %}
		</tbody>
	</table>
	<hr>

	<h2 class="text-center">Goodreads Statistics</h2>

	<h4>The Average Rating is: {{ average_rating }} out of {{ total_ratings }} reviews</h4>
		
	<hr>
	<h2 class="text-center">Want to leave your own Review?</h2>

	<form action="{{ url_for('review', book_id=book.id) }}" method="post">
		<div class="form-group">
		  <label for="exampleFormControlSelect1">Rate on a Scale of 1 to 5</label>
		  <select class="form-control" id="exampleFormControlSelect1" name = "stars">
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		  </select>
		</div>
		
		<div class="form-group">
		  <label for="exampleFormControlTextarea1">What would you like to say?</label>
		  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="review"></textarea>
		</div>
		
		<div class = "form-group">
			<button class="btn btn-primary" type="submit">Submit Your Review</button>
		</div>
	</form>

{% endblock %}
